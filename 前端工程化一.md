# 前端工程化（一）
## 前端开发的历史
以前的前端开发和现在很不一样，那个时候前端只是负责切切图，用css写个样式或者是用js做个动画提交个表单之类的工作，所以前端也经常被称作为**页面仔**。

这种情况一直维持到了2009年`Node.js`出现,`Node.js`是一个运行在*Chrome*的`V8`引擎下的`JavaScript`运行环境。`Node.js`让`JavaScript`摆脱了浏览器的限制，使用`Node.js`可以编写命令行工具，构建web服务器，甚至是桌面应用。

一方面，随着web开发的业务和需求越来越复杂，web开发正慢慢变成一个大型工程，不再是搞个`jquery`就可以干了😂😂。

![avatar](/static/老夫写代码就用jQuery.jpg)

但是当时的web开发缺少完善的开发工具，本身的`JavaScript`,`CSS`和`HTML`也不足以应对大型项目的需求，为了解决这些问题，web开发者们从改善语言（ES6,CSS3和HTML5）本身，制造生产工具（gulp,grunt,babel,webpack)，制定模块化规范（CommonJS)等方面努力。
## 前端工程化开发流程
前端项目开发流程有三个部分
- 开发
- 测试
- 部署
### 开发
最早的前端开发有一个编辑器和一个浏览器就可以开始干了，但是现在的web开发环节需要一个优秀的框架，一个和线上环境相似的本地服务器，在开发过程中还需要能自动刷新浏览器，一个优秀的IDE能提供语法高亮，智能提示，还要有一个好用Debugger工具。
### 测试
前端开发属于GUI开发，所以就必须要有e2e测试，并且还需要可靠单元测试保证业务功能的稳定，而这些事情交给人工来做不仅效率低并且可靠度较低，所以这就要求必须要有自动化测试的工具。
### 部署
部署到生产环境的代码和开发环境的代码有很大的区别，生产环境下的代码需要进行代码压缩，并且静态资源需要部署到静态服务器，文件还得加上md5值防止浏览器使用缓存的问题,这些工作的工作量极大，为了更可靠更有效率，这些事情也必须交由自动化工具来完成。

# 开发
随着现代web开发越来越复杂，正逐渐变成一项大型工程项目，代码量越来越大，开发难度也急剧上升，为了减少开发成本提高生产效率和增加项目质量，web开发社区开始借鉴许多其他语言都拥有的**模块机制**，帮助推进web开发进入**模块化开发时代**。

## 模块化
### 什么是模块化？
模块化的定义很宽泛，但是目的是相同的，就是为了更好的管理代码，将大块的代码分割成独立的，可复用的，易维护的代码块。
### 模块化有什么好处？
- 降低复杂度
- 代码复用
- 减少命名空间污染
#### 降低复杂度
人类能接收的信息复杂度很有限，模块化的开发方式，可以将代码分割成一个个独立的模块，在某个模块内，你就不用考虑其他的模块可能会对这个模块造成什么样的影响，只需要保证这个模块中的代码是正确的就可以了，这种开发方式可以有效地降低了开发时所需要面对的问题复杂度。
#### 代码复用
web开发中会有许多会重复使用到的功能和组件，把这些通用的功能和组件做成模块，在下一次使用的时候，不用再重头编写，就可以使用现成的模块，代码复用可以大大地提高生产力。
#### 减少命名空间污染
JavaScript中只有函数作用域，定义在最外层的变量，在整个作用域中都可以访问的到，所以经常会遇到一些当前命名的变量被其他的变量污染的情况，模块化提供的单独命名空间有效的降低这个污染情况。
## JavaScript模块化
JavaScript从一开始就不是为了大型应用设计的，
在ES6的标准模块化（ESModule Harmony）之前，社区中出现了一些模块化的标准，其中最重要的两种就是`CommonJS`和`AMD`两种。

### CommonJS规范
CommonJS 是以在浏览器环境之外构建 JavaScript 生态系统为目标而产生的项目，比如在服务器和桌面环境中，NodeJS是这种标准的实现，每个文件就是一个模块，有自己的作用域。在一个文件里定义的变量，函数和类都是私有的，对其他文件都是不可见的。

这个项目最开始是由 Mozilla 的工程师 Kevin Dangoor 在2009年1月创建的，当时的名字是 ServerJS。
2009年8月，这个项目改名为 CommonJS，以显示其 API 的更广泛实用性。CommonJS 是一套规范，它的创建和核准是开放的。2013年5月，Node.js 的包管理器 NPM 的作者 Isaac Z. Schlueter 说 CommonJS 已经过时，Node.js 的内核开发者已经废弃了该规范。
[CommonJS规范。](https://zhaoda.net/webpack-handbook/commonjs.html)
从结构的角度来看，`ComonJS`模块是`JavaScript`中可复用部分，导出特定对象，以便可以用于任何依赖的代码。与`AMD`不同，在这种模块周围通常是没有函数封装器的（所以我们在这里看不到`define`)。
CommonJS模块基本上包含两个主要部分：自由变量exports，它包含了一个希望其他模块能够使用的对象，以及`require`函数，模块可以使用该函数导入其他模块的导出。
``` js
// moduleA.js
module.exports = function() {
    console.log('Hello World!')
}

// moduleB.js
const A = require('./moduleA')
A()
// 'Hello World!'
``` 
CommonJS的几个特点
- 所有代码都运行在模块作用域，不会污染全局作用域。
- 模块可以被多次加载，但是只会在第一次被加载的时候会运行一次，然后运行结果被缓存起来，以后再加载会直接从缓存中读取，要想让模块再加载需要先清除缓存。
- 模块加载的顺序，按照它出现再代码中的顺序，并且CommonJS的模块加载过程是同步的。
### ComonJS模块化的实现


